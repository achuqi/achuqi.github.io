<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Motivation Hub</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      text-align: center;
      transition: background 5s ease-in-out;
    }
    .container {
      display: flex;
      gap: 2rem;
      align-items: flex-start;
      max-width: 1100px;
      padding: 1.5rem;
      width: 100%;
      box-sizing: border-box;
    }
    .main {
      flex: 2;
    }
    .news-feed {
      flex: 1;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 12px;
      padding: 1rem 1.2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      text-align: left;
      max-height: 60vh;
      overflow: hidden;
      font-size: 0.9rem;
      position: relative;
    }
    .news-feed h3 {
      margin-top: 0;
      margin-bottom: 0.7rem;
      font-size: 1rem;
      color: #2b6777;
    }
    #news-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #news-list li {
      margin-bottom: 0.6rem;
      line-height: 1.3;
    }
    #news-list li div.headline {
      font-weight: 500;
    }
    #news-list li div.time {
      font-size: 0.8em;
      color: #666;
      margin-left: 0.9rem;
    }
    #last-updated {
      font-size: 0.75rem;
      color: #555;
      text-align: right;
      margin-top: 0.8rem;
      font-style: italic;
      opacity: 0;
      transition: opacity 1.2s ease-in-out;
    }
    h1 {
      font-size: 2.2rem;
      margin-bottom: 0.3rem;
    }
    h2 {
      font-weight: 400;
      color: #555;
      margin-bottom: 1.5rem;
      text-align: center;
      font-size: 1.1rem;
    }
    .greeting {
      font-size: 1.3rem;
      color: #2b6777;
      margin-bottom: 0.5rem;
    }
    .datetime {
      font-size: 1rem;
      color: #444;
      margin-bottom: 1.5rem;
    }
    .quote {
      font-style: italic;
      font-size: 1.2rem;
      margin-bottom: 2rem;
      color: #2b6777;
    }
    .links {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.2rem;
      margin-bottom: 2rem;
    }
    a {
      background-color: #2b6777;
      color: white;
      text-decoration: none;
      padding: 0.7rem 1.4rem;
      border-radius: 10px;
      transition: background 0.2s ease;
    }
    a:hover {
      background-color: #4098a3;
    }
    .progress {
      font-size: 0.95rem;
      color: #666;
    }
    @media (max-width: 900px) {
      body {
        height: auto;
        padding: 1rem 0;
      }
      .container {
        flex-direction: column;
        align-items: stretch;
      }
      .news-feed {
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="main">
      <div class="greeting" id="greeting"></div>
      <h1>Step 1 Study Hub</h1>
      <div class="datetime" id="datetime"></div>
      <h2>Your daily focus: <span id="focus">Renal Physiology üîÅ</span></h2>

      <div class="quote" id="quote">"Trust the process. You‚Äôre learning, not memorizing."</div>

      <div class="links">
        <a href="https://www.uworld.com" target="_blank">UWorld</a>
        <a href="https://ankiweb.net" target="_blank">Anki</a>
        <a href="https://www.amboss.com/us" target="_blank">AMBOSS</a>
        <a href="https://sketchymedical.com" target="_blank">Sketchy</a>
        <a href="https://trello.com" target="_blank">Trello</a>
        <a href="https://blueprintprep.com" target="_blank">Blueprint</a>
      </div>

      <div class="progress">Systems Completed ‚úÖ: Neuro | Cardio | Pulm</div>
    </div>

    <aside class="news-feed">
      <h3>üì∞ News Feed</h3>
      <ul id="news-list">
        <li>Loading latest headlines...</li>
      </ul>
      <div id="last-updated">Last updated: --:--</div>
    </aside>
  </div>

  <script>
    const quotes = [
      'Trust the process. You‚Äôre learning, not memorizing.',
      'Small steps each day add up to big changes.',
      'Consistency beats intensity.',
      'Discipline now, freedom later.',
      'You‚Äôre building a foundation for a lifetime of healing.'
    ];
    document.getElementById('quote').textContent = quotes[Math.floor(Math.random() * quotes.length)];

    function updateDateTime() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const dateString = now.toLocaleDateString(undefined, options);
      const timeString = now.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      document.getElementById('datetime').textContent = `${dateString} | ${timeString}`;

      const hour = now.getHours();
      let greeting = '';
      let background = '';

      if (hour < 12) {
        greeting = '‚òÄÔ∏è Good morning, future doctor!';
        background = 'linear-gradient(to bottom right, #cce5ff, #fff0b3)';
      } else if (hour < 18) {
        greeting = 'üå§Ô∏è Good afternoon, keep the momentum going!';
        background = 'linear-gradient(to bottom right, #b3e0ff, #ffd6a5)';
      } else {
        greeting = 'üåô Good evening ‚Äî one more step toward your goals!';
        background = 'linear-gradient(to bottom right, #a0c4ff, #ffb5a7)';
      }

      document.body.style.background = background;
      document.getElementById('greeting').textContent = greeting;
    }

    function fadeTimestamp() {
      const timestamp = document.getElementById('last-updated');
      timestamp.style.opacity = '0';
      setTimeout(() => {
        timestamp.style.opacity = '1';
      }, 50);
    }

    function parseItem(item) {
      const titleNode = item.querySelector('title');
      const dateNode = item.querySelector('pubDate');
      const title = titleNode ? titleNode.textContent : 'Update';
      let time = null;
      if (dateNode) {
        const d = new Date(dateNode.textContent);
        if (!isNaN(d)) {
          time = d.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' });
        }
      }
      return { title, time };
    }

    function fetchNews() {
      const newsList = document.getElementById('news-list');
      const lastUpdated = document.getElementById('last-updated');
      if (!newsList) return;

      const feedUrls = [
        'https://www.medicalnewstoday.com/rss',
        'https://feeds.reuters.com/reuters/USNews',
        'https://news.google.com/rss/search?q=site%3Areuters.com&hl=en-US&gl=US&ceid=US%3Aen'
      ];

      const parser = new DOMParser();

      Promise.all(
        feedUrls.map(url =>
          fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(url))
            .then(response => response.json())
            .then(data => {
              const xml = parser.parseFromString(data.contents, 'text/xml');
              const items = Array.from(xml.querySelectorAll('item')).slice(0, 3);
              return items.map(parseItem);
            })
        )
      )
        .then(results => {
          const allItems = results.flat().slice(0, 5);
          if (!allItems.length) throw new Error('No items in feeds');

          newsList.innerHTML = '';
          allItems.forEach(item => {
            const li = document.createElement('li');

            const titleDiv = document.createElement('div');
            titleDiv.className = 'headline';
            titleDiv.textContent = '‚Ä¢ ' + item.title;
            li.appendChild(titleDiv);

            if (item.time) {
              const timeDiv = document.createElement('div');
              timeDiv.className = 'time';
              timeDiv.textContent = 'üïí ' + item.time;
              li.appendChild(timeDiv);
            }

            newsList.appendChild(li);
          });

          const now = new Date();
          const timeString = now.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit' });
          lastUpdated.textContent = `Last updated: ${timeString}`;
          fadeTimestamp();
        })
        .catch(() => {
          newsList.innerHTML = '';
          const fallback = [
            "Live headlines couldn't be loaded right now.",
            'Open Reuters US news directly in a new tab.',
            'Open Medical News Today in a new tab.',
            'Open Google News Reuters feed in a new tab.'
          ];
          fallback.forEach((line, index) => {
            const li = document.createElement('li');
            if (index === 1) {
              const link = document.createElement('a');
              link.href = 'https://www.reuters.com/news/archive/usa';
              link.target = '_blank';
              link.textContent = '‚Ä¢ Reuters US news';
              li.appendChild(link);
            } else if (index === 2) {
              const link = document.createElement('a');
              link.href = 'https://www.medicalnewstoday.com';
              link.target = '_blank';
              link.textContent = '‚Ä¢ Medical News Today';
              li.appendChild(link);
            } else if (index === 3) {
              const link = document.createElement('a');
              link.href = 'https://news.google.com/search?q=site%3Areuters.com&hl=en-US&gl=US&ceid=US%3Aen';
              link.target = '_blank';
              link.textContent = '‚Ä¢ Google News Reuters feed';
              li.appendChild(link);
            } else {
              const titleDiv = document.createElement('div');
              titleDiv.className = 'headline';
              titleDiv.textContent = '‚Ä¢ ' + line;
              li.appendChild(titleDiv);
            }
            newsList.appendChild(li);
          });

          const now = new Date();
          const timeString = now.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit' });
          lastUpdated.textContent = `Last attempted update: ${timeString}`;
          fadeTimestamp();
        });
    }

    updateDateTime();
    setInterval(updateDateTime, 1000);

    fetchNews();
    setInterval(fetchNews, 15 * 60 * 1000);
  </script>
</body>
</html>
